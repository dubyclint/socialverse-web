From 9f1e2d3a4b5c6d7e8f90123456789abcdeffedcb Mon Sep 17 00:00:00 2001
From: Paul <paul@socialverse.dev>
Date: Thu, 2 Oct 2025 06:55:00 +0000
Subject: fix: patch better-sqlite3 build for Node.js v22

---
 .npmrc        | 1 +
 Dockerfile    | 4 ++++
 package.json  | 2 +-
 3 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/.npmrc b/.npmrc
new file mode 100644
--- /dev/null
+++ b/.npmrc
@@
+better-sqlite3:buildFlags=--cppflags='-Wno-implicit-fallthrough'

diff --git a/Dockerfile b/Dockerfile
index abcdef1..1234567 100644
--- a/Dockerfile
+++ b/Dockerfile
@@
 # Install dependencies
-RUN npm install
+RUN apt-get update && apt-get install -y python3 make g++ libsqlite3-dev
+RUN npm install

diff --git a/package.json b/package.json
index 1234567..89abcde 100644
--- a/package.json
+++ b/package.json
@@
   "dependencies": {
-    "better-sqlite3": "^8.4.0",
+    "better-sqlite3": "^8.4.0",
     "nuxt": "^3.10.0",
     "vue": "^3.4.0"
   }
